# 開発計画

## 1. 技術選定（Technology Stack）

ビジネス要件である「OS 機能との深い連動」およびシステム要件の「バックグラウンド高速処理」を最短ルートで実現するため、以下のスタックを採用する。

- **言語：** Swift
- **UI フレームワーク：** SwiftUI
  - ウィジェット開発における標準であり、高速な UI 構築が可能。
- **データベース：** SwiftData
  - iOS 17 以降の標準。スキーマ定義が簡潔で、小規模〜中規模のローカル保存に最適。
- **外部連携：** App Intents フレームワーク
  - ショートカットおよびインタラクティブウィジェットのロジック基盤。
- **開発環境：** Xcode 15.0 以上

### 技術選定の比較根拠

| 比較対象                   | 選定可否   | 判断理由                                                                                                     |
| :------------------------- | :--------- | :----------------------------------------------------------------------------------------------------------- |
| **Swift (Native)**         | **採用**   | App Intents やウィジェットの最新機能にフルアクセスでき、起動速度・OS 親和性が最も高いため。                  |
| **Flutter / React Native** | **非採用** | ウィジェットやショートカットの高度な実装には結局 Native コードの記述が必要となり、開発工程が二重化するため。 |

## 2. 開発フェーズとマイルストーン（個人ビルドまで）

### Phase 1: データ基盤と集計ロジックの構築（Day 1-2）

- **データモデルの実装：** SwiftData を用いた `Transaction`（支出レコード）と `Budget`（予算）の定義。
- **計算ロジック：** タイムスタンプを基に「当月の合計」を抽出・算出するロジックの実装。

### Phase 2: 「極限入力」インターフェースの実装（Day 3-5）

- **App Intents の実装：** ショートカットから金額とカテゴリを受け取り、DB に保存するバックグラウンドアクションの作成。
- **インタラクティブウィジェット：** ホーム画面に配置。タップから即座に記録を開始、または特定のカテゴリを 1 タップで記録する UI の構築。

### Phase 3: メインアプリ（Dashboard）の実装（Day 6-8）

- **Dashboard UI：** 予算残高を巨大な数値で表示。進捗率に応じた警告色の切り替えロジック。
- **History UI：** 入力ミスを修正するためのシンプルな時系列リストと削除機能。
- **Settings UI：** 月間予算額の入力・更新フォーム。

### Phase 4: 実機ビルドと最終調整（Day 9-10）

- **実機デプロイ：** 個人用 iPhone へのプロビジョニングとインストール。
- **UX 調整：** 保存成功時の Taptic Feedback（触覚振動）の実装と、ウィジェットの更新頻度の最適化。

## 3. 実機ビルドに向けた準備要件

1. **ハードウェア：** 最新の Xcode が動作する Mac、および検証用の iPhone。
2. **Apple ID：** 個人アカウント（無料版で可）。Xcode の「Signing & Capabilities」にて紐付けを行う。
3. **OS バージョン：** 実機 iPhone の iOS バージョンが 17.0 以上であることを確認。
